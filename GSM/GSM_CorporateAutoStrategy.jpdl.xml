<?xml version="1.0" encoding="UTF-8"?>

<process exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler" name="GSM_CorporateAutoStrategy" xmlns="http://jbpm.org/4.0/jpdl">
  <start continue="async" g="690,4,48,48" name="start1">
    <transition to="Check for Entry Criteria">
     <script expr="12 hours" g="0,0,80,40" var="AUTOTIME"/>
       <script expr="N" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
        <script expr="N" g="0,0,80,40" var="HOLDRBR_FLAG"/>
          <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
            <script expr="AUTO" g="0,0,80,40" var="PROVISIONING_TYPE"/>
             <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
    </transition>
  </start>
  <state continue="async" g="698,653,193,52" name="Wait Before SMS CC41">
      <transition g="-24,-18" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="1" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
       <script expr="1" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="3,-8" name="ContinueWorkflow" to="CC41 - Reminder SMS">
      <timer duedate="4 business days" startdate="${WAITING_ENTRY_DATE}"/>
    </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="1" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
       <script expr="1" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="1" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="1" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="1" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="1" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="174,1871:-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="110,2311:-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <custom g="720,918,150,52" name="CC41 - Reminder SMS" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="SMSAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="MSG_ID"/>
               </key>
               <value>
                  <object expr="CC41"/>
               </value>
            </entry>
         </map>
      </field>
    <transition to="Wait Before SMS CC42">
    <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
    </transition>
  </custom>
  <state continue="async" g="679,1113,230,52" name="Wait Before SMS CC42">
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="2" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="3,-11" name="ContinueWorkflow" to="CC42 - SMS before SD">
      <timer duedate="2 business days" startdate="${WAITING_ENTRY_DATE}"/>
    </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="2" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
         <script expr="2" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="2" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="2" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="2" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="2" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="2" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="174,1869:-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="111,2313:-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <custom g="717,1293,155,52" name="CC42 - SMS before SD" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="SMSAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="MSG_ID"/>
               </key>
               <value>
                  <object expr="CC42"/>
               </value>
            </entry>
         </map>
      </field>
    <transition to="CC42 - Email before SD">
    </transition>
  </custom>
  <state continue="async" g="681,1617,227,52" name="Wait Before Temp SD AUTO71">
      <transition g="11,-4" name="ContinueWorkflow" to="Holiday Action Before AUTO71">
      <timer duedate="2 business days" startdate="${WAITING_ENTRY_DATE}"/>
    </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="3" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="3" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
         <script expr="3" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="3" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="3" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="3" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="3" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="3" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="101,2234:-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="106,2744:-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <state continue="async" g="673,2242,243,58" name="Wait Before SD AUTO70">
      <transition g="4,-2" name="ContinueWorkflow" to="Holiday Action Before SD AUTO70">
      <timer duedate="${DUE_TIME}"/>
    </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="5" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="5" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
         <script expr="5" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="5" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="5" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="5" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="5" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="5" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="524,2542:-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="480,3030:-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <custom g="707,2730,175,52" name="AUTO70 SD" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ProvisioningRevampAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="PROVIDING_ACTION"/>
               </key>
               <value>
                  <object expr="SD"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WF_STEP_NAME"/>
               </key>
               <value>
                  <object expr="Provisioning Wait"/>
               </value>
            </entry>
         </map>
      </field>
      <transition g="-5,-20" name="ErrorHandler" to="ActionError">
         <script expr="7" g="0,0,80,40" var="ERROR_FLAG"/>
      </transition>
    <transition to="Provisioning Wait Forever After SD">
    </transition>
  </custom>
  <state continue="async" g="682,3009,224,52" name="Wait Before SMS CC44">
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="7" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="7" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="2,-12" name="ContinueWorkflow" to="CC44 - SMS before Suspension">
      <timer duedate="2 business days" startdate="${WAITING_ENTRY_DATE}"/>
    </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
         <script expr="7" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="7" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="7" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="7" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="7" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="7" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="7" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="845,2896:-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="461,3523:-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <custom g="700,3104,190,52" name="CC44 - SMS before Suspension" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="SMSAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="MSG_ID"/>
               </key>
               <value>
                  <object expr="CC44"/>
               </value>
            </entry>
         </map>
      </field>
    <transition to="Schedule Job Action Before Suspension">
   <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
    </transition>
  </custom>
  <state continue="async" g="669,3340,253,52" name="Wait Before Suspension AUTO75">
      <transition g="6,-9" name="ContinueWorkflow" to="Holiday Action Before Suspension AUTO75">
      <timer duedate="${DUE_TIME}"/>
    </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="8" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="8" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
         <script expr="8" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="8" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="8" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="8" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="8" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="8" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="8" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="585,3633:8,-7" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="701,3087:-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <sub-process g="684,4301,225,52" name="Collection Final Strategy" sub-process-key="GSM_SUBWF_CorporateFinalStrategy">
    <transition g="3,-1" name="IXC_Exit" to="Collection Ended"/>
  </sub-process>
  <custom g="727,4474,140,51" name="Collection Ended" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ImportInterfaceAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="ACTIVITY_TYPE"/>
               </key>
               <value>
                  <object expr="CollectionEnded"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="IXC_UPDATE"/>
               </key>
               <value>
                  <object expr="Y"/>
               </value>
            </entry>
         </map>
      </field>
    <transition to="end1"/>
      <transition g="-5,-20" name="ErrorHandler" to="ActionError">
         <script expr="10" g="0,0,80,40" var="ERROR_FLAG"/>
      </transition>
  </custom>
  <end g="774,4621,48,49" name="end1"/>
  <custom g="724,113,140,52" name="Collection Started" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="DoNothing"/>
      </field>
    <transition to="Check Workflow Type">
    </transition>
  </custom>
  <custom g="708,3882,175,52" name="AUTO75 - Suspension" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ProvisioningRevampAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="PROVIDING_ACTION"/>
               </key>
               <value>
                  <object expr="Suspension"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WF_STEP_NAME"/>
               </key>
               <value>
                  <object expr="Provisioning Wait"/>
               </value>
            </entry>
         </map>
      </field>
      <transition g="-5,-20" name="ErrorHandler" to="ActionError">
         <script expr="2" g="0,0,80,40" var="ERROR_FLAG"/>
      </transition>
    <transition to="Provisioning Wait Forever After Suspension">
    </transition>
  </custom>
  <state continue="async" g="306,653,255,52" name="Wait for AutoRelease Max Scheduled Time">
      <transition g="-37,-26" name="Payment" to="Check IMPT Rule">
        <script expr="Y" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
      <transition g="303,823:-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="Y" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
      <transition g="303,823:-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="Y" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
       <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="22" g="0,0,80,40" var="RELEASE_FLAG"/>
         <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSuspension" to="Release Suspension">
        <script expr="22" g="0,0,80,40" var="RELEASE_FLAG"/>
         <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSDandSuspension" to="Release Suspension1">
        <script expr="22" g="0,0,80,40" var="RELEASE_FLAG"/>
         <script expr="Y" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
         <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="351,624;342,635:-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time"/>
      <transition g="198,948:-48,-17" name="ContinueWorkflow" to="Check State Between Release SD and Suspension">
      <timer duedate="${AUTOTIME}"/>
    </transition>
   </state>
  <custom g="664,3450,263,52" name="Holiday Action Before Suspension AUTO75" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="HolidayAction"/>
      </field>
    <transition to="Check Working Day Before Suspension"/>
  </custom>
  <decision g="771,3584,235,48" name="Check Working Day Before Suspension">
    <transition g="-5,-20" name="No" to="Wait 1 Day Before Suspension AUTO75">
      <condition expr="${IS_WORKING_DAY!=&apos;T&apos;}"/>
      <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
    </transition>
    <transition g="4,-21" name="Yes" to="Check Roaming Flag Before Suspension">
      <condition expr="${IS_WORKING_DAY==&apos;T&apos;}"/>
    </transition>
  </decision>
  <state continue="async" g="1025,3583,245,52" name="Wait 1 Day Before Suspension AUTO75">
      <transition g="1147,3475:-117,5" name="ContinueWorkflow" to="Holiday Action Before Suspension AUTO75">
      <timer duedate="1 business day" startdate="${WAITING_ENTRY_DATE}"/>
    </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="14" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="14" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="14" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="14" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="14" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="14" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="14" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="14" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="14" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <custom g="677,1751,234,52" name="Holiday Action Before AUTO71" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="HolidayAction"/>
      </field>
    <transition to="Check Working Day Before  Temp SD"/>
  </custom>
  <decision g="770,1874,225,48" name="Check Working Day Before  Temp SD">
    <transition g="-35,-20" name="Yes" to="Check Roaming Flag Before Temp SD">
      <condition expr="${IS_WORKING_DAY==&apos;T&apos;}"/>
    </transition>
    <transition g="-5,-20" name="No" to="Wait 1 Day Before AUTO71">
      <condition expr="${IS_WORKING_DAY!=&apos;T&apos;}"/>
     <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
    </transition>
  </decision>
  <state continue="async" g="1064,1872,209,52" name="Wait 1 Day Before AUTO71">
      <transition g="1167,1777:-106,5" name="ContinueWorkflow" to="Holiday Action Before AUTO71">
      <timer duedate="1 business day" startdate="${WAITING_ENTRY_DATE}"/>
    </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="12" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="12" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="12" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="12" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="12" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="12" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="12" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="12" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <decision g="770,2007,225,48" name="Check Roaming Flag Before Temp SD">
    <transition g="-5,-20" name="Yes" to="01-ROAM-02-AUTO-RF1">
      <condition expr="${ROAMING_FLAG&gt;0}"/>
    </transition>
    <transition g="-5,-20" name="No" to="AUTO71 - Temp SD">
      <condition expr="${ROAMING_FLAG==0}"/>
    </transition>
  </decision>
  <task continue="async" g="1166,2006,223,52" name="01-ROAM-02-AUTO-RF1">
      <assignment-handler class="com.lhs.wma.wfms.jbpm4.WFMSTaskAssignment">
         <field name="actionName">
            <string value="01-ROAM-02-AUTO-RF1"/>
         </field>
      </assignment-handler>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="4" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="4" g="0,0,80,40" var="PTP_FLAG"/>      
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="4" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
         <script expr="4" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="4" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="4" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="4" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="4" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="1277,2153:-100,-22" name="ContinueWorkflow" to="AUTO71 - Temp SD"/>
   </task>
  <custom g="695,2386,198,52" name="Holiday Action Before SD AUTO70" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="HolidayAction"/>
      </field>
    <transition to="Check Working Day Before SD"/>
  </custom>
  <decision g="770,2508,195,48" name="Check Working Day Before SD">
    <transition g="-21,-21" name="Yes" to="Check Roaming Flag Before SD">
      <condition expr="${IS_WORKING_DAY==&apos;T&apos;}"/>
    </transition>
    <transition g="-5,-20" name="No" to="Wait  1 Day Before SD AUTO70 ">
      <condition expr="${IS_WORKING_DAY!=&apos;T&apos;}"/>
     <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
    </transition>
  </decision>
  <state continue="async" g="1071,2507,187,52" name="Wait  1 Day Before SD AUTO70 ">
      <transition g="1164,2411:-112,5" name="ContinueWorkflow" to="Holiday Action Before SD AUTO70">
      <timer duedate="1 business day" startdate="${WAITING_ENTRY_DATE}"/>
    </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="13" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="13" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="13" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="13" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="13" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="13" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="13" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="13" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
  <decision g="770,2628,200,9" name="Check Roaming Flag Before SD">
    <transition g="-5,-20" name="Yes" to="01-ROAM-02-AUTO-RF2">
      <condition expr="${ROAMING_FLAG&gt;0}"/>
    </transition>
    <transition g="10,-20" name="SD" to="AUTO70 SD">
      <condition expr="${ROAMING_FLAG==0}"/>
       <script expr="AUTO" g="0,0,80,40" var="PROVISIONING_TYPE"/>
    </transition>
  </decision>
  <task continue="async" g="1214,2627,216,52" name="01-ROAM-02-AUTO-RF2">
      <assignment-handler class="com.lhs.wma.wfms.jbpm4.WFMSTaskAssignment">
         <field name="actionName">
            <string value="01-ROAM-02-AUTO-RF2"/>
         </field>
      </assignment-handler>
      <transition g="1322,2756:-106,-17" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
          <script expr="6" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
          <script expr="6" g="0,0,80,40" var="PTP_FLAG"/>      
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="6" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
          <script expr="6" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="6" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="6" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="6" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="6" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </task>
  <decision g="771,3733,240,48" name="Check Roaming Flag Before Suspension">
    <transition g="-5,-20" name="Yes" to="01-ROAM-02-AUTO-RF3">
      <condition expr="${ROAMING_FLAG&gt;0}"/>
    </transition>
    <transition g="13,-17" name="Suspension" to="AUTO75 - Suspension">
      <condition expr="${ROAMING_FLAG==0}"/>
       <script expr="AUTO" g="0,0,80,40" var="PROVISIONING_TYPE"/>
    </transition>
  </decision>
  <task continue="async" g="1189,3731,257,52" name="01-ROAM-02-AUTO-RF3">
      <assignment-handler class="com.lhs.wma.wfms.jbpm4.WFMSTaskAssignment">
         <field name="actionName">
            <string value="01-ROAM-02-AUTO-RF3"/>
         </field>
      </assignment-handler>
      <transition g="1317,3908:-152,-21" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
          <script expr="9" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
          <script expr="9" g="0,0,80,40" var="PTP_FLAG"/>      
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="9" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
          <script expr="9" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="9" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="9" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="9" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="9" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="9" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </task>
   <sub-process g="1761,1514,160,52" name="Promise To Pay SubWF" sub-process-key="GSM_SUBWF_PromiseStrategy">
      <transition g="-36,-17" name="KeptPromise" to="Check IMPT Rule After Kept Promise">
          <script expr="P2P_M" g="0,0,80,40" var="IXC_STEP"/>
      </transition>
      
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
          <script expr="${PTP_FLAG}" g="0,0,80,40" var="HOLD_FLAG"/>
              <script expr="P2P_M" g="0,0,80,40" var="IXC_STEP"/>
                <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="-5,-20" name="CancelPromise" to="Check for Intermediate P2P Flag">
          <script expr="P2P_M" g="0,0,80,40" var="IXC_STEP"/>
      </transition>
      <transition g="-5,-20" name="SD" to="Holiday Action Before SD AUTO70">
        <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="Holiday Action Before Suspension AUTO75">
        <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="2,-20" name="BrokenPromise" to="03-BP-03-AUTO03">
          <script expr="P2P_M" g="0,0,80,40" var="IXC_STEP"/>
            <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="1919,1659:-5,-20" name="P2PSetupFailed" to="Check for Intermediate P2P Flag">
          <script expr="P2P_M" g="0,0,80,40" var="IXC_STEP"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule"/>
   </sub-process>
   <sub-process g="2092,1422,155,52" name="Payment Plan SubWF" sub-process-key="GSM_SUBWF_PaymentPlanSubWF">
      <transition g="3,-20" name="KeptPromise" to="Check IMPT Rule After Kept Promise">
        <script expr="PaymentPlan_M" g="0,0,80,40" var="IXC_STEP"/>
      </transition>
      
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
          <script expr="${PTP_FLAG}" g="0,0,80,40" var="HOLD_FLAG"/>
            <script expr="PaymentPlan_M" g="0,0,80,40" var="IXC_STEP"/>
              <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="-5,-20" name="CancelPaymentPlan" to="Check for Intermediate P2P Flag">
        <script expr="PaymentPlan_M" g="0,0,80,40" var="IXC_STEP"/>
      </transition>
      <transition g="2169,1723:-85,5" name="BrokenPromise" to="03-BP-03-AUTO03">
        <script expr="PaymentPlan_M" g="0,0,80,40" var="IXC_STEP"/>
          <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="2064,1614:-5,-20" name="PPSetupFailed" to="Check for Intermediate P2P Flag"/>
       <transition g="-5,-20" name="Invoice" to="Check IMPT Rule"/>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule"/>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule"/>
   </sub-process>
   <decision g="1791,2274,150,48" name="Select PTP_FLAG For Different State">
      <transition to="Wait Before SMS CC41">
         <condition expr="${PTP_FLAG==&apos;1&apos;}"/>
      </transition>
      <transition to="Wait Before SMS CC42">
         <condition expr="${PTP_FLAG==&apos;2&apos;}"/>
      </transition>
      <transition to="Wait Before Temp SD AUTO71">
         <condition expr="${PTP_FLAG==&apos;3&apos;}"/>
      </transition>
      <transition to="01-ROAM-02-AUTO-RF1">
         <condition expr="${PTP_FLAG==&apos;4&apos;}"/>
      </transition>
      <transition to="01-ROAM-02-AUTO-RF2">
         <condition expr="${PTP_FLAG==&apos;6&apos;}"/>
      </transition>
      <transition to="Wait Before SMS CC44">
         <condition expr="${PTP_FLAG==&apos;7&apos;}"/>
      </transition>
      <transition to="01-ROAM-02-AUTO-RF3">
         <condition expr="${PTP_FLAG==&apos;9&apos;}"/>
      </transition>
      <transition to="02-OOPS-03-AUTO">
         <condition expr="${PTP_FLAG==&apos;10&apos;}"/>
      </transition>
      <transition to="Wait 30 Days Before Final Strategy">
         <condition expr="${PTP_FLAG==&apos;11&apos;}"/>
      </transition>
      <transition to="Wait 1 Day Before AUTO71">
         <condition expr="${PTP_FLAG==&apos;12&apos;}"/>
      </transition>
      <transition to="Wait  1 Day Before SD AUTO70 ">
         <condition expr="${PTP_FLAG==&apos;13&apos;}"/>
      </transition>
      <transition to="Wait 1 Day Before Suspension AUTO75">
         <condition expr="${PTP_FLAG==&apos;14&apos;}"/>
      </transition>
      <transition to="01-ROAM-01-AUTO">
         <condition expr="${PTP_FLAG==&apos;15&apos;}"/>
      </transition>
      <transition to="06-Hold-04-AUTO02">
         <condition expr="${PTP_FLAG==&apos;16&apos;}"/>
      </transition>
      <transition to="Wait Before SD AUTO70">
         <condition expr="${PTP_FLAG==&apos;5&apos;}"/>
      </transition>
      <transition to="Wait Before Suspension AUTO75">
         <condition expr="${PTP_FLAG==&apos;8&apos;}"/>
      </transition>
      <transition to="03-BP-03-AUTO03">
         <condition expr="${PTP_FLAG==&apos;17&apos;}"/>
      </transition>
   </decision>
   <task continue="async" g="1622,794,210,52" name="02-OOPS-03-AUTO">
      <assignment-handler class="com.lhs.wma.wfms.jbpm4.WFMSTaskAssignment">
         <field name="actionName">
            <string value="02-OOPS-03-AUTO"/>
         </field>
      </assignment-handler>
      <transition g="-5,-20" name="PromiseToPay" to="Reset OOPS Flag">
         <script expr="10" g="0,0,80,40" var="PTP_FLAG"/> 
            <script expr="1" g="0,0,80,40" var="SETOOPS_FLAG"/>    
      </transition>
      <transition g="-63,-21" name="TO_SMS_BEFORE_SD_CC42" to="Set OOPS Flag"/>
      <transition g="1850,874:-5,-20" name="Hold" to="Reset OOPS Flag">
         <script expr="10" g="0,0,80,40" var="HOLD_FLAG"/>
           <script expr="3" g="0,0,80,40" var="SETOOPS_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="10" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="10" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="10" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="10" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="10" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSuspension" to="Release Suspension">
        <script expr="10" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSDandSuspension" to="Release Suspension1">
        <script expr="10" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="1771,903:-5,-20" name="Suspension" to="Reset OOPS Flag">
        <script expr="5" g="0,0,80,40" var="SETOOPS_FLAG"/>
      </transition>
      <transition g="1866,865:-5,-20" name="SD" to="Reset OOPS Flag">
        <script expr="4" g="0,0,80,40" var="SETOOPS_FLAG"/>
      </transition>
      <transition g="-75,3" name="TO_SMS_BEFORE_SUSP_CC44" to="Set OOPS flag"/>
      <transition g="3,-2" name="IMPT" to="Check OOPS or Roaming Report Flag in OOPS State"/>
      <transition g="1759,917:-5,-20" name="Installment" to="Reset OOPS Flag">
         <script expr="10" g="0,0,80,40" var="PTP_FLAG"/>  
           <script expr="2" g="0,0,80,40" var="SETOOPS_FLAG"/>    
      </transition>
   </task>
   <state continue="async" g="681,4199,230,52" name="Wait 30 Days Before Final Strategy">
      <transition g="3,-11" name="ContinueWorkflow" to="Collection Final Strategy">
         <timer duedate="${30-SUSPENSION_DAYS} business days" startdate="${WAITING_ENTRY_DATE}"/>
      </transition>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
        <script expr="11" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="11" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="11" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="11" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="11" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="11" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="11" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="11" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="11" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSuspension" to="Release Suspension">
        <script expr="11" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSDandSuspension" to="Release Suspension1">
        <script expr="11" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="624,4080:-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="466,3517:-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </state>
   <custom g="712,1457,165,52" name="CC42 - Email before SD" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="EMAILAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="MSG_ID"/>
               </key>
               <value>
                  <object expr="MAIL_BEFORE_SD"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="Wait Before Temp SD AUTO71">
    <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
   </custom>
   <decision g="242,882,135,48" name="Check IMPT Rule">
      <transition g="173,906:-5,-20" name="No" to="Check Exit Criteria After Payment">
         <condition expr="${OOPS_FLAG!=&apos;Y&apos; &amp;&amp; ROAMING_REPORT_FLAG!=&apos;Y&apos;}"/>
      </transition>
      <transition g="-5,-20" name="Yes" to="Check State Between Release SD and Suspension">
         <condition expr="${OOPS_FLAG==&apos;Y&apos; || ROAMING_REPORT_FLAG==&apos;Y&apos;}"/>
      </transition>
   </decision>
   <decision g="297,1353,190,48" name="Select State After Payment">
      <transition to="Wait Before SMS CC41">
         <condition expr="${PAYNINV_FLAG==&apos;1&apos;}"/>
      </transition>
      <transition to="Wait Before SMS CC42">
         <condition expr="${PAYNINV_FLAG==&apos;2&apos;}"/>
      </transition>
      <transition to="Wait Before Temp SD AUTO71">
         <condition expr="${PAYNINV_FLAG==&apos;3&apos;}"/>
      </transition>
      <transition to="Wait 1 Day Before AUTO71">
         <condition expr="${PAYNINV_FLAG==&apos;12&apos;}"/>
      </transition>
      <transition to="01-ROAM-02-AUTO-RF1">
         <condition expr="${PAYNINV_FLAG==&apos;4&apos;}"/>
      </transition>
      <transition to="Wait  1 Day Before SD AUTO70 ">
         <condition expr="${PAYNINV_FLAG==&apos;13&apos;}"/>
      </transition>
      <transition to="01-ROAM-02-AUTO-RF2">
         <condition expr="${PAYNINV_FLAG==&apos;6&apos;}"/>
      </transition>
      <transition to="Wait Before SMS CC44">
         <condition expr="${PAYNINV_FLAG==&apos;7&apos;}"/>
      </transition>
      <transition to="Wait 1 Day Before Suspension AUTO75">
         <condition expr="${PAYNINV_FLAG==&apos;14&apos;}"/>
      </transition>
      <transition to="01-ROAM-02-AUTO-RF3">
         <condition expr="${PAYNINV_FLAG==&apos;9&apos;}"/>
      </transition>
      <transition to="Wait 30 Days Before Final Strategy">
         <condition expr="${PAYNINV_FLAG==&apos;11&apos;}"/>
      </transition>
      <transition to="06-Hold-04-AUTO02">
         <condition expr="${PAYNINV_FLAG==&apos;16&apos;}"/>
      </transition>
      <transition to="03-BP-03-AUTO03">
         <condition expr="${PAYNINV_FLAG==&apos;17&apos;}"/>
      </transition>
      <transition to="01-ROAM-01-AUTO">
         <condition expr="${PAYNINV_FLAG==&apos;15&apos;}"/>
      </transition>
      <transition to="02-OOPS-03-AUTO">
         <condition expr="${PAYNINV_FLAG==&apos;10&apos;}"/>
      </transition>
      <transition to="ActionError Wait">
         <condition expr="${PAYNINV_FLAG==&apos;20&apos;}"/>
      </transition>
      <transition to="Early Entry Wait">
         <condition expr="${PAYNINV_FLAG==&apos;21&apos;}"/>
      </transition>
      <transition to="Wait Before SD AUTO70">
         <condition expr="${PAYNINV_FLAG==&apos;5&apos;}"/>
      </transition>
      <transition to="Wait Before Suspension AUTO75">
         <condition expr="${PAYNINV_FLAG==&apos;8&apos;}"/>
      </transition>
       <transition to="Provisioning Wait Forever After SD">
         <condition expr="${PAYNINV_FLAG==&apos;41&apos;}"/>
      </transition>
       <transition to="Provisioning Wait Forever After Suspension">
         <condition expr="${PAYNINV_FLAG==&apos;42&apos;}"/>
      </transition>
       <transition to="Provisioning Wait Forever After Release">
         <condition expr="${PAYNINV_FLAG==&apos;43&apos;}"/>
      </transition>
       <transition to="Provisioning Wait Forever After Release1">
         <condition expr="${PAYNINV_FLAG==&apos;44&apos;}"/>
      </transition>
   </decision>
   <task continue="async" g="294,2565,179,52" name="06-Hold-04-AUTO02">
      <assignment-handler class="com.lhs.wma.wfms.jbpm4.WFMSTaskAssignment">
         <field name="actionName">
            <string value="06-Hold-04-AUTO02"/>
         </field>
      </assignment-handler>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="16" g="0,0,80,40" var="PTP_FLAG"/>
           <script expr="Y" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
         <script expr="16" g="0,0,80,40" var="PTP_FLAG"/>
           <script expr="Y" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="16" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="16" g="0,0,80,40" var="PAYNINV_FLAG"/>
          <script expr="Y" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
      <transition g="220,1690:-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="16" g="0,0,80,40" var="PAYNINV_FLAG"/>
          <script expr="Y" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="16" g="0,0,80,40" var="PAYNINV_FLAG"/>
          <script expr="Y" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="16" g="0,0,80,40" var="PAYNINV_FLAG"/>
          <script expr="Y" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="16" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSuspension" to="Release Suspension">
        <script expr="16" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSDandSuspension" to="Release Suspension1">
        <script expr="16" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="TO_SMS_BEFORE_SD_CC42" to="Tickler For Hold Exit"/>
      <transition g="-5,-20" name="TO_SMS_BEFORE_SUSP_CC44" to="Tickler for Hold Exit"/>
   </task>
   <decision g="1296,796,225,48" name="Check OOPS or Roaming Report Flag">
      <transition g="-5,-20" name="No" to="02-OOPS-03-AUTO">
         <condition expr="${ROAMING_REPORT_FLAG!=&apos;Y&apos;}"/>
      </transition>
      <transition g="-5,-20" name="Yes" to="01-ROAM-01-AUTO">
         <condition expr="${ROAMING_REPORT_FLAG==&apos;Y&apos;}"/>
      </transition>
   </decision>
   <task continue="async" g="1253,627,135,52" name="01-ROAM-01-AUTO">
      <assignment-handler class="com.lhs.wma.wfms.jbpm4.WFMSTaskAssignment">
         <field name="actionName">
            <string value="01-ROAM-01-AUTO"/>
         </field>
      </assignment-handler>
      <transition g="-50,-23" name="TO_SMS_BEFORE_SD_CC42" to="Set Roaming Report Flag"/>
      <transition g="-5,-20" name="PromiseToPay" to="Reset Roaming Report Flag">
         <script expr="15" g="0,0,80,40" var="PTP_FLAG"/>
           <script expr="1" g="0,0,80,40" var="SETRRPT_FLAG"/>
      </transition>
      <transition g="1135,722:-5,-20" name="Hold" to="Reset Roaming Report Flag">
         <script expr="15" g="0,0,80,40" var="HOLD_FLAG"/>
           <script expr="3" g="0,0,80,40" var="SETRRPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="15" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="15" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="15" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="15" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="15" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSuspension" to="Release Suspension">
        <script expr="15" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSDandSuspension" to="Release Suspension1">
        <script expr="15" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="1238,781:-5,-20" name="SD" to="Reset Roaming Report Flag">
        <script expr="4" g="0,0,80,40" var="SETRRPT_FLAG"/>
      </transition>
      <transition g="1124,708:-5,-20" name="Suspension" to="Reset Roaming Report Flag">
        <script expr="5" g="0,0,80,40" var="SETRRPT_FLAG"/>
      </transition>
      <transition g="-35,-10" name="TO_SMS_BEFORE_SUSP_CC44" to="Set Roaming Report flag"/>
      <transition g="1348,594;1358,608:-5,-20" name="IMPT" to="01-ROAM-01-AUTO"/>
      <transition g="1220,763:-5,-20" name="Installment" to="Reset Roaming Report Flag">
         <script expr="15" g="0,0,80,40" var="PTP_FLAG"/>
           <script expr="2" g="0,0,80,40" var="SETRRPT_FLAG"/>
      </transition>
   </task>
   <custom g="1233,499,175,52" name="Set Roaming Report Flag" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="ROAMING_REPORT_FLAG"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="CC42 - SMS before SD"/>
   </custom>
   <custom g="1421,707,150,52" name="Set OOPS Flag IMPT" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="OOPS_FLAG"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="01-ROAM-01-AUTO"/>
   </custom>
   <custom g="1974,687,125,52" name="Set OOPS Flag" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="OOPS_FLAG"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="CC42 - SMS before SD"/>
   </custom>
   <task continue="async" g="1754,1847,174,52" name="03-BP-03-AUTO03">
      <assignment-handler class="com.lhs.wma.wfms.jbpm4.WFMSTaskAssignment">
         <field name="actionName">
            <string value="03-BP-03-AUTO03"/>
         </field>
      </assignment-handler>
      <transition g="1886,1678:-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
        <script expr="Y" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
        <script expr="Y" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="17" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry">
         <script expr="17" g="0,0,80,40" var="HOLD_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="17" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="17" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="17" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="17" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="17" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSuspension" to="Release Suspension">
        <script expr="17" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSDandSuspension" to="Release Suspension1">
        <script expr="17" g="0,0,80,40" var="RELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="SD" to="AUTO70 SD">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="-5,-20" name="Suspension" to="AUTO75 - Suspension">
       <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition g="1869,1811;1882,1823:-5,-20" name="CancelPaymentPlan" to="03-BP-03-AUTO03"/>
      <transition g="-5,-20" name="TO_SMS_BEFORE_SD_CC42" to="CC42 - SMS before SD"/>
      <transition g="-5,-20" name="TO_SMS_BEFORE_SUSP_CC44" to="CC44 - SMS before Suspension"/>
   </task>
   <decision g="2150,1810,230,48" name="Check IMPT Rule After Kept Promise">
      <transition g="-5,-20" name="No" to="Check Exit Criteria After Kept Promise">
         <condition expr="${OOPS_FLAG!=&apos;Y&apos; &amp;&amp; ROAMING_REPORT_FLAG!=&apos;Y&apos;}"/>
      </transition>
      <transition g="-5,-20" name="Yes" to="Check for Intermediate P2P Flag">
         <condition expr="${OOPS_FLAG==&apos;Y&apos; || ROAMING_REPORT_FLAG==&apos;Y&apos;}"/>
      </transition>
   </decision>
   <custom g="2097,3101,115,52" name="Release SD1" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ProvisioningRevampAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="PROVIDING_ACTION"/>
               </key>
               <value>
                  <object expr="ReleaseSD"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WF_STEP_NAME"/>
               </key>
               <value>
                  <object expr="Provisioning Wait"/>
               </value>
            </entry>
         </map>
      </field>
      <transition g="-5,-20" name="ErrorHandler" to="ActionError">
         <script expr="6" g="0,0,80,40" var="ERROR_FLAG"/>
      </transition>
      <transition to="Check Wait After Release"/>
   </custom>
   <custom g="2055,2873,200,52" name="Release Suspension1" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ProvisioningRevampAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="PROVIDING_ACTION"/>
               </key>
               <value>
                  <object expr="ReleaseSuspension"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WF_STEP_NAME"/>
               </key>
               <value>
                  <object expr="Provisioning Wait"/>
               </value>
            </entry>
         </map>
      </field>
      <transition g="-5,-20" name="ErrorHandler" to="ActionError">
         <script expr="5" g="0,0,80,40" var="ERROR_FLAG"/>
      </transition>
      <transition to="Provisioning Wait Between Release Suspension and Release SD"/>
   </custom>
   <custom g="1890,3142,110,52" name="Release SD" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ProvisioningRevampAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="PROVIDING_ACTION"/>
               </key>
               <value>
                  <object expr="ReleaseSD"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WF_STEP_NAME"/>
               </key>
               <value>
                  <object expr="Provisioning Wait"/>
               </value>
            </entry>
         </map>
      </field>
      <transition g="-5,-20" name="ErrorHandler" to="ActionError">
         <script expr="3" g="0,0,80,40" var="ERROR_FLAG"/>
      </transition>
      <transition to="Check Wait After Release"/>
   </custom>
   <custom g="1563,3361,195,52" name="Release Suspension" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ProvisioningRevampAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="PROVIDING_ACTION"/>
               </key>
               <value>
                  <object expr="ReleaseSuspension"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WF_STEP_NAME"/>
               </key>
               <value>
                  <object expr="Provisioning Wait"/>
               </value>
            </entry>
         </map>
      </field>
      <transition g="-5,-20" name="ErrorHandler" to="ActionError">
         <script expr="4" g="0,0,80,40" var="ERROR_FLAG"/>
      </transition>
      <transition to="Check Wait After Release"/>
   </custom>
   <decision g="1843,3762,190,48" name="Select State After Release">
      <transition to="Wait Before SMS CC44">
         <condition expr="${RELEASE_FLAG==&apos;7&apos;}"/>
      </transition>
      <transition to="Wait 1 Day Before Suspension AUTO75">
         <condition expr="${RELEASE_FLAG==&apos;14&apos;}"/>
      </transition>
      <transition to="01-ROAM-02-AUTO-RF3">
         <condition expr="${RELEASE_FLAG==&apos;9&apos;}"/>
      </transition>
      <transition to="Wait 30 Days Before Final Strategy">
         <condition expr="${RELEASE_FLAG==&apos;11&apos;}"/>
      </transition>
      <transition to="06-Hold-04-AUTO02">
         <condition expr="${RELEASE_FLAG==&apos;16&apos;}"/>
      </transition>
      <transition to="03-BP-03-AUTO03">
         <condition expr="${RELEASE_FLAG==&apos;17&apos;}"/>
      </transition>
      <transition to="02-OOPS-03-AUTO">
         <condition expr="${RELEASE_FLAG==&apos;10&apos;}"/>
      </transition>
      <transition to="01-ROAM-01-AUTO">
         <condition expr="${RELEASE_FLAG==&apos;15&apos;}"/>
      </transition>
      <transition to="Wait for AutoRelease Max Scheduled Time">
         <condition expr="${RELEASE_FLAG==&apos;22&apos;}"/>
      </transition>
      <transition to="Wait For 6 hours">
         <condition expr="${RELEASE_FLAG==&apos;23&apos;}"/>
      </transition>
      <transition to="Wait Before Suspension AUTO75">
         <condition expr="${RELEASE_FLAG==&apos;8&apos;}"/>
      </transition>
   </decision>
   <decision g="149,1020,225,48" name="Check Exit Criteria After Payment">
      <handler class="com.mobinil.decision.handler.ExitCriteriaValidator"/>
      <transition g="29,1044;29,1197;29,1803;29,2919;29,4392;29,4499:-11,-20" name="T" to="Wait For 12 hours Before Exit">
       <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
      <transition g="-12,-20" name="F" to="Check Payment Form Hold State or Not"/>
   </decision>
   <decision g="149,1241,200,48" name="Check RBR Rule After Payment">
      <handler class="com.mobinil.decision.handler.RBRValidator"/>
      <transition g="-12,-20" name="T" to="CC39 - Auto Entry State">
       <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
        <script expr="N" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
      <transition g="-11,-20" name="F" to="Check Autorelease Flag"/>
   </decision>
   <decision g="2150,1965,250,48" name="Check Exit Criteria After Kept Promise">
      <handler class="com.mobinil.decision.handler.ExitCriteriaValidator"/>
      <transition g="-12,-20" name="F" to="Check Payment Form Hold State or Not After Kept Promise"/>
      <transition g="2278,1989;2278,2102;2278,3318;2278,4099;2278,4393;299,4393:-11,-20" name="T" to="Wait For 12 hours Before Exit">
       <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
   </decision>
   <decision g="2150,2274,225,48" name="Check RBR Rule After Kept Promise">
      <handler class="com.mobinil.decision.handler.RBRValidator"/>
      <transition g="-12,-20" name="T" to="CC39 - Auto Entry State">
        <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
          <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="-11,-20" name="F" to="Check for Intermediate P2P Flag"/>
   </decision>
   <state continue="async" g="200,4474,200,52" name="Wait For 12 hours Before Exit">
      <transition g="-5,-20" name="ContinueWorkflow" to="Collection Ended">
         <timer duedate="12 hours" startdate="${WAITING_ENTRY_DATE}"/>
      </transition>
      <transition g="389,4451;393,4464:-5,-20" name="InvoiceBalance" to="Wait For 12 hours Before Exit"/>
      <transition g="364,4445;374,4455:-5,-20" name="Payment" to="Wait For 12 hours Before Exit"/>
      <transition g="247,4435;231,4450:-47,-13" name="AutoRelease" to="Wait For 12 hours Before Exit"/>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag"/>
      <transition g="-5,-20" name="Invoice" to="Check Exit criteria"/>
   </state>
   <custom g="729,2127,130,52" name="AUTO71 - Temp SD" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="DoNothing"/>
      </field>
      <transition to="Schedule Job Action Before SD">
      <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
   </custom>
   <custom g="707,544,175,52" name="CC39 - Auto Entry State" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="DoNothing"/>
      </field>
      <transition to="Wait Before SMS CC41">
      <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
   </custom>
   <custom g="1420,4033,115,52" name="ActionError" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="DoNothing"/>
      </field>
      <transition to="ActionError Wait">
      <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
   </custom>
   <state continue="async" g="1724,4033,140,52" name="ActionError Wait">
      <transition g="-5,-20" name="ContinueWorkflow" to="Select State After ActionError Wait">
         <timer duedate="12 hours" startdate="${WAITING_ENTRY_DATE}"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
          <script expr="20" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
         <script expr="20" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="20" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
         <script expr="20" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="20" g="0,0,80,40" var="IMPT_FLAG"/>
      </transition>
   </state>
   <decision g="1867,3893,235,48" name="Select State After ActionError Wait">
      <transition to="AUTO70 SD">
         <condition expr="${ERROR_FLAG==&apos;7&apos;}"/>
      </transition>
      <transition to="AUTO75 - Suspension">
         <condition expr="${ERROR_FLAG==&apos;2&apos;}"/>
      </transition>
      <transition to="Release SD">
         <condition expr="${ERROR_FLAG==&apos;3&apos;}"/>
      </transition>
      <transition to="Release Suspension">
         <condition expr="${ERROR_FLAG==&apos;4&apos;}"/>
      </transition>
      <transition to="Release Suspension1">
         <condition expr="${ERROR_FLAG==&apos;5&apos;}"/>
      </transition>
      <transition to="Release SD1">
         <condition expr="${ERROR_FLAG==&apos;6&apos;}"/>
      </transition>
      <transition to="Collection Ended">
         <condition expr="${ERROR_FLAG==&apos;10&apos;}"/>
      </transition>
   </decision>
   <decision g="149,1353,170,48" name="Check Autorelease Flag">
      <transition to="Check State Between Release SD and Suspension">
         <condition expr="${AUTORELEASE_FLAG==&apos;N&apos;}"/>
          <script expr="N" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
      <transition to="Check Provisioning Wait Flag">
         <condition expr="${AUTORELEASE_FLAG==&apos;Y&apos;}"/>
          <script expr="N" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
   </decision>
   <state continue="async" g="91,1498,165,52" name="Wait For 6 hours">
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule"/>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule"/>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule"/>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
       <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
        <script expr="N" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSD" to="Release SD">
        <script expr="23" g="0,0,80,40" var="RELEASE_FLAG"/>
         <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSuspension" to="Release Suspension">
        <script expr="23" g="0,0,80,40" var="RELEASE_FLAG"/>
         <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="-5,-20" name="ReleaseSDandSuspension" to="Release Suspension1">
        <script expr="23" g="0,0,80,40" var="RELEASE_FLAG"/>
         <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
      <transition g="104,1473;97,1487:-5,-20" name="AutoRelease" to="Wait For 6 hours"/>
      <transition g="-5,-20" name="ContinueWorkflow" to="Check State Between Release SD and Suspension">
         <timer duedate="6 hours"/>
           <script expr="N" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
   </state>
   <decision g="770,218,155,48" name="Check Workflow Type">
      <transition g="-5,-20" name="IXC_Entry" to="Wait For Migration">
         <condition expr="${WORKFLOW_TYPE==&apos;M&apos;}"/>
      </transition>
      <transition g="-5,-20" name="IXC_Entry" to="Early Entry Action">
         <condition expr="${WORKFLOW_TYPE==&apos;N&apos;}"/>
      </transition>
   </decision>
    <state continue="async" g="949,216,150,52" name="Wait For Migration">
      <transition g="-5,-20" name="MigComplete" to="Check Diferent State For Migration">
      <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
      <transition g="-45,-5" name="ContinueWorkflow" to="Update Workflow Type"/>
   </state>
   <decision g="1547,218,230,48" name="Check Diferent State For Migration">
    <transition to="Collection Final Strategy">
         <condition expr="${IXC_STEP==&apos;Writeoff&apos;}"/>
      </transition>
      <transition to="Collection Final Strategy">
         <condition expr="${IXC_STEP==&apos;Deactivation&apos;}"/>
      </transition>
      <transition to="Collection Final Strategy">
         <condition expr="${IXC_STEP==&apos;Suspension&apos; &amp;&amp; IXC_SUB_STEP!=&apos;WBFS&apos;}"/>
      </transition>
      <transition to="Wait 30 Days Before Final Strategy">
         <condition expr="${IXC_STEP==&apos;Suspension&apos; &amp;&amp; IXC_SUB_STEP==&apos;WBFS&apos;}"/>
      </transition>
      <transition to="Payment Plan SubWF">
         <condition expr="${IXC_STEP==&apos;PaymentPlan&apos;}"/>
          <script expr="1" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition to="Promise To Pay SubWF">
         <condition expr="${IXC_STEP==&apos;P2P&apos;}"/>
          <script expr="1" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition to="Tickler For Hold Entry">
         <condition expr="${IXC_STEP==&apos;Hold&apos;}"/>
           <script expr="1" g="0,0,80,40" var="HOLD_FLAG"/>
           <script expr="Hold_M" g="0,0,80,40" var="IXC_STEP"/>
      </transition>
      <transition g="1132,464:" to="Wait Before SMS CC41">
         <condition expr="${IXC_STEP==&apos;CC39&apos;}"/>
      </transition>
      <transition to="03-BP-03-AUTO03">
         <condition expr="${IXC_STEP==&apos;03-BP-03-AUTO03&apos;}"/>
      </transition>
      <transition to="Wait Before SMS CC44">
         <condition expr="${IXC_STEP==&apos;SD&apos;}"/>
      </transition>
      <transition to="INVALID CUSTOMER STATE">
         <condition expr="${IXC_STEP==&apos;Invalid&apos; || IXC_STEP==&apos;Invalid_PP&apos; || IXC_STEP==&apos;Invalid_INS&apos; || IXC_STEP==&apos;Invalid_PAY&apos;}"/>
      </transition>
      <transition to="Early Entry Action">
         <condition expr="${IXC_STEP==&apos;FirstStep&apos;}"/>
      </transition>
   </decision>
   <custom g="1427,4226,170,52" name="INVALID CUSTOMER STATE" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="DoNothing"/>
      </field>
      <transition to="Wait to Fix Customer Data"/>
   </custom>
   <state continue="async" g="1419,4333,185,52" name="Wait to Fix Customer Data">
      <transition g="1511,4499:-5,-20" name="IXC_Exit" to="Collection Ended"/>
   </state>
   <custom g="720,318,150,52" name="Early Entry Action" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="EarlyEntryAction"/>
      </field>
      <transition to="Early Entry Wait"/>
   </custom>
   <state continue="async" g="698,434,193,52" name="Early Entry Wait">
      <transition g="-5,-20" name="ContinueWorkflow" to="CC39 - Auto Entry State">
         <timer duedate="0 business minute" startdate="${DUE_TIME}"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag"/>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
         <script expr="21" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
         <script expr="21" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
        <script expr="21" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
         <script expr="21" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
   </state>
   <custom g="392,2244,205,52" name="Schedule Job Action Before SD" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ScheduleJobAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="ACTION_TYPE"/>
               </key>
               <value>
                  <object expr="SD"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="DUE_DAYS"/>
               </key>
               <value>
                  <object expr="1"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="Wait Before SD AUTO70"/>
   </custom>
   <custom g="673,3213,245,52" name="Schedule Job Action Before Suspension" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="ScheduleJobAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="ACTION_TYPE"/>
               </key>
               <value>
                  <object expr="Suspension"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="DUE_DAYS"/>
               </key>
               <value>
                  <object expr="2"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="Wait Before Suspension AUTO75"/>
   </custom>
   <custom g="688,4087,215,52" name="Tickler For AUTO75 - Suspension" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="TSHAction"/>
      </field>
      <transition to="Wait 30 Days Before Final Strategy">
        <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
   </custom>
   <custom g="706,2916,175,52" name="Tickler For AUTO70 - SD" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="TSHAction"/>
      </field>
      <transition to="Wait Before SMS CC44">
        <script expr="${calendar:getDate()}" g="0,0,80,40" var="WAITING_ENTRY_DATE"/>
      </transition>
   </custom>
   <custom g="74,2406,170,52" name="Tickler For Hold Entry" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="TSHAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="ACTION_TYPE"/>
               </key>
               <value>
                  <object expr="TICKLER"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="LDES"/>
               </key>
               <value>
                  <object expr="Hold entry on IX Collection"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="SHDES"/>
               </key>
               <value>
                  <object expr="IX Hold Entry"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="TICKLER_TYPE"/>
               </key>
               <value>
                  <object expr="S"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="06-Hold-04-AUTO02"/>
   </custom>
   <custom g="176,2704,165,52" name="Tickler For Hold Exit" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="TSHAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="ACTION_TYPE"/>
               </key>
               <value>
                  <object expr="TICKLER"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="LDES"/>
               </key>
               <value>
                  <object expr="Hold exit on IX Collection"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="SHDES"/>
               </key>
               <value>
                  <object expr="IX Hold Exit"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="TICKLER_TYPE"/>
               </key>
               <value>
                  <object expr="S"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="CC42 - SMS before SD"/>
   </custom>
   <custom g="276,2787,165,52" name="Tickler for Hold Exit" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="TSHAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="ACTION_TYPE"/>
               </key>
               <value>
                  <object expr="TICKLER"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="LDES"/>
               </key>
               <value>
                  <object expr="Hold exit on IX Collection"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="SHDES"/>
               </key>
               <value>
                  <object expr="IX Hold Exit"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="TICKLER_TYPE"/>
               </key>
               <value>
                  <object expr="S"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="CC44 - SMS before Suspension"/>
   </custom>
   <custom g="1459,513,175,52" name="Set Roaming Report flag" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="ROAMING_REPORT_FLAG"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="CC44 - SMS before Suspension"/>
   </custom>
   <custom g="1987,793,125,52" name="Set OOPS flag" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="OOPS_FLAG"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="CC44 - SMS before Suspension"/>
   </custom>
   <decision g="149,1121,240,48" name="Check Payment Form Hold State or Not">
      <transition g="-5,-20" name="No" to="Check RBR Rule After Payment">
         <condition expr="${HOLDRBR_FLAG==&apos;N&apos;}"/>
      </transition>
      <transition g="100,1145;100,1377:-5,-20" name="Yes" to="Check Autorelease Flag">
         <condition expr="${HOLDRBR_FLAG==&apos;Y&apos;}"/>
      </transition>
   </decision>
   <decision g="2150,2104,335,48" name="Check Payment Form Hold State or Not After Kept Promise">
      <transition g="-5,-20" name="No" to="Check RBR Rule After Kept Promise">
         <condition expr="${HOLDRBR_FLAG==&apos;N&apos;}"/>
      </transition>
      <transition g="-5,-20" name="Yes" to="Check for Intermediate P2P Flag">
         <condition expr="${HOLDRBR_FLAG==&apos;Y&apos;}"/>
           <script expr="N" g="0,0,80,40" var="HOLDRBR_FLAG"/>
      </transition>
   </decision>
   <state continue="async" g="1977,2999,355,52" name="Provisioning Wait Between Release Suspension and Release SD">
      <transition g="-5,-20" name="ContinueWorkflow" to="Release SD1">
       <script expr="N" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
			<script expr="Y" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
			 <script expr="N" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
		</transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="Y" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
    </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
       <script expr="Y" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
    </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
       <script expr="Y" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
    </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag">
        <script expr="N" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
      </transition>
   </state>
   <decision g="1702,669,295,48" name="Check OOPS or Roaming Report Flag in OOPS State">
      <transition g="1788,693;1788,778:-5,-20" name="No" to="02-OOPS-03-AUTO">
         <condition expr="${ROAMING_REPORT_FLAG!=&apos;Y&apos;}"/>
      </transition>
      <transition g="1597,693:-5,-20" name="Yes" to="Set OOPS Flag IMPT">
         <condition expr="${ROAMING_REPORT_FLAG==&apos;Y&apos;}"/>
      </transition>
   </decision>
   <decision g="1977,1720,215,48" name="Check for Intermediate P2P Flag">
      <transition g="1968,1829:" to="03-BP-03-AUTO03">
         <condition expr="${PTP_FLAG_I==&apos;Y&apos;}"/>
           <script expr="N" g="0,0,80,40" var="PTP_FLAG_I"/>
      </transition>
      <transition g="2001,2130:" to="Select PTP_FLAG For Different State">
         <condition expr="${PTP_FLAG_I==&apos;N&apos;}"/>
      </transition>
   </decision>
   <custom g="945,319,160,52" name="Update Workflow Type" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="WORKFLOW_TYPE"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="Early Entry Action"/>
   </custom>
   <custom g="969,804,185,52" name="Reset Roaming Report Flag" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="ROAMING_REPORT_FLAG"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="Check Different Events RRPT"/>
   </custom>
   <decision g="1037,918,195,48" name="Check Different Events RRPT">
      <transition to="Promise To Pay SubWF">
         <condition expr="${SETRRPT_FLAG==&apos;1&apos;}"/>
      </transition>
      <transition to="Payment Plan SubWF">
         <condition expr="${SETRRPT_FLAG==&apos;2&apos;}"/>
      </transition>
      <transition to="Tickler For Hold Entry">
         <condition expr="${SETRRPT_FLAG==&apos;3&apos;}"/>
      </transition>
      <transition to="AUTO70 SD">
         <condition expr="${SETRRPT_FLAG==&apos;4&apos;}"/>
          <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition to="AUTO75 - Suspension">
         <condition expr="${SETRRPT_FLAG==&apos;5&apos;}"/>
          <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </decision>
   <custom g="1829,933,135,52" name="Reset OOPS Flag" class="com.lhs.wma.wfms.jbpm4.WFMSActionAssignment" exception-listener="com.lhs.wma.wfms.jbpm4.WFMSExceptionHandler">
      <field name="actionName">
         <string value="UpdateWorkflowAttributeAction"/>
      </field>
      <field name="variables">
         <map class="java.util.HashMap">
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_PUB"/>
               </key>
               <value>
                  <object expr="OOPS_FLAG"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_TYPE"/>
               </key>
               <value>
                  <object expr="V"/>
               </value>
            </entry>
            <entry>
               <key>
                  <string value="WORKFLOW_ATTR_VALUE"/>
               </key>
               <value>
                  <object expr="N"/>
               </value>
            </entry>
         </map>
      </field>
      <transition to="Check Different Events OOPS"/>
   </custom>
   <decision g="1872,1061,195,48" name="Check Different Events OOPS">
      <transition to="Promise To Pay SubWF">
         <condition expr="${SETOOPS_FLAG==&apos;1&apos;}"/>
      </transition>
       <transition to="Payment Plan SubWF">
         <condition expr="${SETOOPS_FLAG==&apos;2&apos;}"/>
      </transition>
      <transition to="Tickler For Hold Entry">
         <condition expr="${SETOOPS_FLAG==&apos;3&apos;}"/>
      </transition>
      <transition to="AUTO70 SD">
         <condition expr="${SETOOPS_FLAG==&apos;4&apos;}"/>
          <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
      <transition to="AUTO75 - Suspension">
         <condition expr="${SETOOPS_FLAG==&apos;5&apos;}"/>
          <script expr="MAN" g="0,0,80,40" var="PROVISIONING_TYPE"/>
      </transition>
   </decision>
   <state continue="async" g="679,2823,230,52" name="Provisioning Wait Forever After SD">
      <transition g="-30,-8" name="ContinueWorkflow" to="Tickler For AUTO70 - SD"/>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="7" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
      <script expr="7" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag"/>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry"/>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="41" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="41" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="41" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
       <script expr="41" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
   </state>
   <state continue="async" g="660,3989,270,52" name="Provisioning Wait Forever After Suspension">
      <transition g="-33,-9" name="ContinueWorkflow" to="Tickler For AUTO75 - Suspension"/>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
         <script expr="11" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
      <script expr="11" g="0,0,80,40" var="PTP_FLAG"/>
      </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag"/>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry"/>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
        <script expr="42" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="42" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
        <script expr="42" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
       <script expr="42" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
   </state>
   <decision g="1940,3323,180,48" name="Check Wait After Release">
      <transition to="Provisioning Wait Forever After Release">
         <condition expr="${RELEASE_FLAG!=&apos;22&apos; &amp;&amp; RELEASE_FLAG!=&apos;23&apos;}"/>
      </transition>
      <transition to="Provisioning Wait Forever After Release1">
         <condition expr="${RELEASE_FLAG==&apos;22&apos; || RELEASE_FLAG==&apos;23&apos;}"/>
      </transition>
   </decision>
   <state continue="async" g="1787,3471,255,52" name="Provisioning Wait Forever After Release">
      <transition g="-5,-20" name="ContinueWorkflow" to="Select State After Release"/>
      <transition g="-5,-20" name="PromiseToPay" to="Promise To Pay SubWF">
      <script expr="${RELEASE_FLAG}" g="0,0,80,40" var="PTP_FLAG"/>
    </transition>
      <transition g="-5,-20" name="Installment" to="Payment Plan SubWF">
      <script expr="${RELEASE_FLAG}" g="0,0,80,40" var="PTP_FLAG"/>
    </transition>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag"/>
      <transition g="-5,-20" name="Hold" to="Tickler For Hold Entry"/>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
      <script expr="43" g="0,0,80,40" var="PAYNINV_FLAG"/>
    </transition>
    <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
      <script expr="43" g="0,0,80,40" var="PAYNINV_FLAG"/>
    </transition>
    <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
      <script expr="43" g="0,0,80,40" var="PAYNINV_FLAG"/>
    </transition>
    <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
      <script expr="43" g="0,0,80,40" var="PAYNINV_FLAG"/>
    </transition>
   </state>
   <state continue="async" g="2129,3465,260,52" name="Provisioning Wait Forever After Release1">
      <transition g="-5,-20" name="ContinueWorkflow" to="Select State After Release"/>
      <transition g="-5,-20" name="IMPT" to="Check OOPS or Roaming Report Flag"/>
      <transition g="-5,-20" name="AutoRelease" to="Wait for AutoRelease Max Scheduled Time">
      	<script expr="44" g="0,0,80,40" var="PAYNINV_FLAG"/>
      </transition>
      <transition g="-5,-20" name="Payment" to="Check IMPT Rule">
        <script expr="Y" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
        <script expr="44" g="0,0,80,40" var="PAYNINV_FLAG"/>
    </transition>
      <transition g="-5,-20" name="InvoiceBalance" to="Check IMPT Rule">
       <script expr="Y" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
       <script expr="44" g="0,0,80,40" var="PAYNINV_FLAG"/>
    </transition>
      <transition g="-5,-20" name="Invoice" to="Check IMPT Rule">
       <script expr="Y" g="0,0,80,40" var="AUTORELEASE_FLAG"/>
       <script expr="44" g="0,0,80,40" var="PAYNINV_FLAG"/>
    </transition>
   </state>
   <decision g="218,1353,285,48" name="Check State Between Release SD and Suspension">
      <transition to="Select State After Payment">
         <condition expr="${RELEASEINMID_FLAG==&apos;N&apos;}"/>
      </transition>
      <transition to="Provisioning Wait Between Release Suspension and Release SD">
         <condition expr="${RELEASEINMID_FLAG==&apos;Y&apos;}"/>
          <script expr="N" g="0,0,80,40" var="RELEASEINMID_FLAG"/>
      </transition>
   </decision>
   <decision g="212,4244,155,48" name="Check Exit criteria">
      <handler class="com.mobinil.decision.handler.ExitCriteriaValidator"/>
      <transition g="222,4383:-12,-20" name="T" to="Wait For 12 hours Before Exit"/>
      <transition g="-11,-20" name="F" to="Early Entry Action"/>
   </decision>
    <decision g="1049,20,115,48" name="CheckAmount">
   <transition g="-5,-20" name="Yes" to="Collection Started">
         <condition expr="${CUSTOMER_AMOUNT &gt;= 46}"/>
      </transition>
      <transition g="-5,-20" name="No" to="Wait For 12 hours Before Exit">
         <condition expr="${CUSTOMER_AMOUNT &lt; 46}"/>
      </transition>
   </decision>
   <decision g="792,5,180,48" name="Check for Entry Criteria">
   <handler class="com.mobinil.decision.handler.EntryCriteriaValidator"/>
    <transition g="-12,-20" name="T" to="CheckAmount"/>
       <transition g="-11,-20" name="F" to="Wait For 12 hours Before Exit"/>
   </decision>
   <decision name="Check Provisioning Wait Flag" g="115,1406,200,48">
      <transition to="Wait For 6 hours">
         <condition expr="${PAYNINV_FLAG!=&apos;44&apos;}"/>
      </transition>
      <transition to="Check State Between Release SD and Suspension">
         <condition expr="${PAYNINV_FLAG==&apos;44&apos;}"/>
      </transition>
   </decision>
</process>